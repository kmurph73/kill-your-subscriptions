{"version":3,"sources":["app/components/apps_view.jsx","app/components/cancel_button.jsx","app/components/subscription_modal.jsx","app/initialize.js","app/models/app.js","app/util.js"],"names":["AppsView","props","state","apps","App","allToJSON","activeTab","amountMode","e","val","currentTarget","value","matches","findMatches","setState","query","window","some","a","test","terse","push","length","RegExp","replace","searchMatches","findFromStart","findFromQuery","localStorage","setItem","JSON","stringify","json","getAll","preventDefault","editingApp","app","selected","saveToLocalStorage","resetAppsState","tab","stopPropagation","amount_cents","uuid","amountInputted","type","clickCheck","width","classes","clickApp","name","site","renderSelected","mode","txt","onInput","height","clickAddSubscription","handleAmountModeChange","map","renderItem","filter","your_apps","onHideModal","sumAmountsCents","active","switchTab","renderTabContent","React","Component","CancelButton","toggle","bind","tooltipOpen","SubscriptionModal","modal","className","onSubmit","time","Date","now","document","addEventListener","fetch","then","r","ReactDOM","render","querySelector","json_attrs","attrs","prop","toLowerCase","tersify","parse","getItem","toJSON","genUUID","email","uuidv5","URL","dollarStringToCents","money_string","Math","round","parseFloat","centsToDollaString","x","dollar_sign","cents","dollars","substr","decimal","str"],"mappings":"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","file":"public/app.js","sourcesContent":["import React from 'react';\nimport bindAll from 'lodash/bindAll';\nimport classnames from 'classnames';\n\nimport { dollarStringToCents, centsToDollaString } from '../util.js';\nimport Toggle from 'react-toggle'\n\nimport App from 'models/app.js';\nimport SubscriptionModal from './subscription_modal.jsx';\n\nimport { UncontrolledTooltip, Button, Nav, NavItem, NavLink, Tooltip } from 'reactstrap';\n\nexport default class AppsView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    bindAll(this, ['onInput', 'findMatches', 'switchTab', 'renderItem', 'renderSelected', 'clickCheck', 'render', 'clickAddSubscription', 'onHideModal', 'handleAmountModeChange'])\n\n    this.state = {\n      apps: App.allToJSON(),\n      activeTab: '1',\n      amountMode: 'starting'\n    }\n  }\n\n  onInput(e) {\n    let val = e.currentTarget.value;\n\n    let matches = this.findMatches(val);\n\n    this.setState({\n      apps: matches\n    })\n  }\n\n  searchMatches(query) {\n    let matches = [];\n\n    window.apps.some((a) => {\n      if (query.test(a.terse)) {\n        matches.push(a)\n      }\n\n      return matches.length >= 20;\n    })\n\n    return matches\n  }\n\n  findFromQuery(query) {\n    query = new RegExp(query.replace(/\\s|\\(|\\)/, ''), \"i\")\n\n    return this.searchMatches(query)\n  }\n\n  findFromStart(query) {\n    query = new RegExp('^' + query.replace(/\\s|\\(|\\)/, ''), \"i\")\n\n    return this.searchMatches(query)\n  }\n\n  findMatches(query) {\n    let matches = [];\n\n    if (query.length > 2) {\n      matches = this.findFromStart(query)\n    }\n\n    if (!matches.length) {\n      matches = this.findFromQuery(query)\n    }\n\n    return matches;\n  }\n\n  save() {\n    localStorage.setItem('addresses', JSON.stringify(json || this.getAll()))\n  }\n\n  clickAddSubscription(e) {\n    e.preventDefault()\n\n    this.setState({\n      editingApp: {}\n    })\n  }\n\n  clickApp(app) {\n    if (!app.selected) {\n      app.selected = true\n\n      App.saveToLocalStorage()\n      this.resetAppsState()\n    }\n  }\n\n  switchTab(tab) {\n    this.setState({ activeTab: tab })\n  }\n\n  resetAppsState() {\n    this.setState({\n      apps: App.allToJSON()\n    })\n  }\n\n  clickCheck(e, app) {\n    e.stopPropagation()\n    e.preventDefault()\n\n    app.selected = false;\n\n    this.resetAppsState()\n  }\n\n  amountInputted(e, app) {\n    app.amount_cents = dollarStringToCents(e.currentTarget.value)\n\n    this.resetAppsState()\n  }\n\n  renderSelected(app) {\n    return (\n      <div className=\"center-between\" key={app.uuid}>\n        <div className=\"center money-div mr-2\">\n          <div>$</div>\n          <input type=\"number\" className='money-box' placeholder='0.00' onInput={e => this.amountInputted(e, app)} />\n          <div className='per-what'>/{app.type == 'monthly' ? 'mo' : 'year'}</div>\n        </div>\n\n        {this.state.activeTab === '1' &&\n          <img onClick={e => this.clickCheck(e, app)} className=\"check mx-2\" style={{width: 20}} src='/check.svg' />\n        }\n      </div>\n    )\n  }\n\n  handleAmountModeChange(e) {\n    this.setState({\n      amountMode: this.state.amountMode === 'starting' ? 'current' : 'starting'\n    })\n  }\n\n  renderItem(app) {\n    let classes = classnames({selected: app.selected});\n\n    return (\n      <div className={\"center-between app-item \" + classes} onClick={() => this.clickApp(app)} key={app.uuid}>\n        <div>\n          <div>{app.name}</div>\n          {app.selected &&\n            <div>\n              <a className='site' href={app.site} target='_blank'>{app.site}</a>\n            </div>\n          }\n        </div>\n\n        {app.selected ? this.renderSelected(app) : null}\n      </div>\n    )\n  }\n\n  renderTabContent() {\n    let mode = this.state.amountMode;\n    let txt = mode === 'starting' ? 'Showing starting amounts' : 'Showing current amounts';\n\n    if (this.state.activeTab === '1') {\n      return (\n        <div>\n          <div className=\"center mt-2\">\n            <input onInput={this.onInput} style={{width: '90%', height: 40}} className='form-control mb-2' placeholder=\"Search subscriptions\" />\n          </div>\n\n          <div className=\"center-between mt-1\">\n            <Button onClick={this.clickAddSubscription} outline color=\"primary\">Add Subscription</Button>{' '}\n            <div className=\"center\">\n              <Toggle\n                id='amount-mode'\n                defaultChecked={this.state.amountMode == 'starting'}\n                icons={false}\n                onChange={this.handleAmountModeChange} />\n              <span className=\"ml-1\" id='amount-mode'>{txt}</span>\n            </div>\n          </div>\n\n          <div className=\"center mt-1\">\n            <div className=\"list-group\" className='mt-1' style={{width: 400}}>\n              {App.getAll().map(this.renderItem)}\n            </div>\n          </div>\n        </div>\n      )\n    } else {\n      let apps = App.getAll().filter(a => a.selected);\n\n      return (\n        <div>\n          <div className=\"center mt-1\">\n            <Button onClick={this.clickAddSubscription} outline color=\"primary\">Add Subscription</Button>{' '}\n          </div>\n\n          <div className=\"center mt-1\">\n            <div className=\"list-group\" className='mt-1' style={{width: 400}}>\n              {apps.map(this.renderItem)}\n            </div>\n          </div>\n        </div>\n      )\n    }\n  }\n\n  onHideModal() {\n    this.setState({\n      editingApp: null\n    })\n  }\n\n  render() {\n    let your_apps = App.getAll().filter(a => a.selected)\n\n    return (\n      <div className='container' id=\"content\">\n        <SubscriptionModal editingApp={this.state.editingApp} onHideModal={this.onHideModal} />\n\n        <h5 className='lets-kill'>Let's kill your subscriptions.</h5>\n\n        <div className='starting-amount my-2'>\n          Starting amount: {centsToDollaString(App.sumAmountsCents())}\n        </div>\n\n        <div className='current-amount my-2'>\n          Current amount: $0\n        </div>\n\n        <Nav tabs>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '1' })}\n              onClick={() => { this.switchTab('1'); }}\n            >\n              Subscriptions\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '2' })}\n              onClick={() => { this.switchTab('2'); }}\n            >\n              Your Subscriptions ({your_apps.length})\n            </NavLink>\n          </NavItem>\n        </Nav>\n\n        {this.renderTabContent()}\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { UncontrolledTooltip } from 'reactstrap';\n\nexport default class CancelButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      tooltipOpen: false\n    };\n  }\n\n  toggle() {\n    this.setState({\n      tooltipOpen: !this.state.tooltipOpen\n    });\n  }\n\n  render() {\n    return (\n      <div>\n      </div>\n    )\n  }\n\n}\n","import React from 'react';\nimport bindAll from 'lodash/bindAll';\nimport { FormGroup, Label, Form, Input, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nclass SubscriptionModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modal: false\n    };\n\n    bindAll(this, ['onSubmit']);\n  }\n\n  onSubmit(e) {\n    e.preventDefault()\n  }\n\n  render() {\n    return (\n      <Modal isOpen={!!this.props.editingApp} className={this.props.className}>\n        <ModalHeader>Add a subscription</ModalHeader>\n        <ModalBody>\n          <Form onSubmit={this.onSubmit}>\n            <FormGroup>\n              <Input placeholder=\"subscription name\" />\n            </FormGroup>\n\n            <FormGroup className='d-flex'>\n              <Input className='mr-2' name=\"select\" type=\"number\" placeholder='0.00' style={{width: 90}}></Input>\n\n              <Input type=\"select\" name=\"frequency\" className='ml-2'>\n                <option>monthly</option>\n                <option>yearly</option>\n              </Input>\n            </FormGroup>\n\n            <FormGroup>\n              <Label>Website</Label>\n              <Input placeholder=\"https://blah.com\" />\n            </FormGroup>\n\n            <div className='center-between mt-3'>\n              <Button color=\"secondary\" onClick={this.props.onHideModal}>Cancel</Button>\n              <Button color=\"primary\">Add</Button>{' '}\n            </div>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nexport default SubscriptionModal;\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from 'models/app.js';\nimport AppsView from 'components/apps_view.jsx';\n\nlet time = Date.now()\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  fetch('/subscription_apps.json').then(r => r.json()).then((json) => {\n    window.apps = json.apps;\n\n    ReactDOM.render(<AppsView />, document.querySelector('#app'));\n  });\n});\n","import { genUUID } from '../util.js';\nimport sumBy from 'lodash/sumBy';\nimport map from 'lodash/map';\n\nconst json_attrs = ['uuid', 'name', 'selected', 'amount', 'frequency', 'site']\n\nclass App {\n  constructor(attrs) {\n    for (let prop in attrs) {\n      this[prop] = attrs[prop];\n    }\n\n    if (!this.uuid) {\n      this.uuid = genUUID(attrs.name);\n    }\n  }\n\n  tersify(name) {\n    return name.toLowerCase().replace(/\\s/, '')\n  }\n\n  setName(name) {\n    this.name = name\n    this.terse = this.tersify(name)\n\n    App.saveToLocalStorage()\n  }\n\n  setSelected(val) {\n    this.selected = val\n\n    App.saveToLocalStorage()\n  }\n\n  static getAll() {\n    if (this.apps) { return this.apps; }\n\n    const apps = JSON.parse(localStorage.getItem('apps')) || window.apps;\n    this.apps = apps.map(a => new App(a));\n\n    return this.apps;\n  }\n\n  toJSON() {\n    const json = {};\n\n    for (let a of json_attrs) {\n      json[a] = this[a];\n    }\n\n    return json;\n  }\n\n  static allToJSON() {\n    return map(this.getAll(), a => a.toJSON())\n  }\n\n  static sumAmountsCents() {\n    return sumBy(this.getAll(), app => app.amount_cents || 0)\n  }\n\n  static saveToLocalStorage(json) {\n    localStorage.setItem('apps', JSON.stringify(this.getAll()));\n  }\n}\n\nexport default App;\n","import uuidv5 from 'uuid/v5';\n\nexport const genUUID = function(email) {\n  return uuidv5(email, uuidv5.URL);\n}\n\n// eg 9.99 => 999, or $7.77 => 777\n// HT: https://codereview.stackexchange.com/a/3530\nexport const dollarStringToCents = function(money_string) {\n  return Math.round(100 * parseFloat(money_string.replace(/[$,]/g, '')));\n}\n\n// http://stackoverflow.com/a/33286686/548170\nexport const centsToDollaString = function(x, dollar_sign) {\n  if (dollar_sign == null) { dollar_sign = true; }\n  let cents = x + '';\n  while (cents.length < 4) {\n    cents = `0${cents}`;\n  }\n  let dollars = cents.substr(0, cents.length - 2);\n  const decimal = cents.substr(cents.length - 2, 2);\n  while ((dollars.length % 3) !== 0) {\n    dollars = `0${dollars}`;\n  }\n  const str = dollars.replace(/(\\d{3})(?=\\d)/g, '$1,').replace(/^0*(?=.)/, '');\n  return (dollar_sign ? '$' : '') + str + '.' + decimal;\n}\n"]}